angular.module("Transport",["ngRoute","ngSanitize","LocalStorageModule"]).config(["$routeProvider","$httpProvider","$locationProvider","localStorageServiceProvider","config",function(e,r,o,t,n){angular.forEach(n.interceptor,function(r){var o=r.replace(/_[a-z]/g,function(e){return e.split("_")[1].toUpperCase()});o+="Controller",e.when("/"+r,{templateUrl:"templates/"+r+".html",reloadOnSearch:!1,controller:o})}),e.otherwise("/index"),r.defaults.useXDomain=!0,r.defaults.withCredentials=!0,delete r.defaults.headers.common["X-Requested-With"],t.setStorageCookie(.02),r.interceptors.push("tokenInterceptor")}]).run(["appServices",function(e){e.init()}]),angular.module("Transport").controller("teachingController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){t.show(),r.query_tutorial({}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?e.tutorial=r.teach:o.autoHide(r.message)})}]),angular.module("Transport").controller("signupController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("signinController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("servicesController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.services={state:"charge"},e.change=function(r){e.services.state=r}}]),angular.module("Transport").controller("questionController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("privacyController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("ordersController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.preview_id="",e.preview=function(r){e.preview_id=r},e.hide=function(){e.preview_id=""}}]),angular.module("Transport").controller("orderController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("meInfoController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("infosController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){e.news=[],e.page={pn:1,page_size:15,message:"点击加载更多"},e.loadMore=function(){e.no_more||(t.show(),e.page.message="正在加载...",r.query_news(e.page).then(function(r){t.hide(),e.page.message="点击加载更多",r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?(e.news=e.news.concat(r.Result.NewsList.list),e.no_more=e.news.length==r.Result.NewsList.totalRow?!0:!1):o.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.format_time=function(e){return e.split(" ")[0]},e.loadMore()}]),angular.module("Transport").controller("infoController",["$scope","$routeParams","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a,c){n.show(),o.query_news_by_id({id:r.id}).then(function(r){n.hide(),r.code==c.request.SUCCESS&&r.status==c.response.SUCCESS?e.info=r.Result.NewsDetail:t.autoHide(r.message)})}]),angular.module("Transport").controller("indexController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){t.show(),r.query_banner({}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?e.banners=r.IndexBanners:o.autoHide(r.message)})}]),angular.module("Transport").controller("forgetController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("createAddressController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("costController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){t.show(),r.query_fee({}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?e.fee=r.money:o.autoHide(r.message)})}]),angular.module("Transport").controller("contactController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){t.show(),r.query_contact({}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?e.contact=r.contactInfo:o.autoHide(r.message)})}]),angular.module("Transport").controller("chargeRecordsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("cargosMergeController",["$scope","$location","errorServices","toastServices","localStorageService","config",function(e){e.transport={way:"self",address_type:"business",preview:"hide"}}]),angular.module("Transport").controller("cargosController",["$scope","$location","errorServices","toastServices","localStorageService","config",function(e,r){e.merge=function(){r.path("/cargos_merge")}}]),angular.module("Transport").controller("cargoController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("calculatorController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.transport={way:"self"}}]),angular.module("Transport").controller("askforpayRecordsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("addressController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("accountController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("aboutController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").factory("transportServices",["$http","config",function(e,r){return{query_contact:function(o){return e({url:r.url+"/mobile/Home/contactInfo",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_banner:function(o){return e({url:r.url+"/mobile/Home/bannerList",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_tutorial:function(o){return e({url:r.url+"/mobile/Home/teach",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_fee:function(o){return e({url:r.url+"/mobile/Home/money",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_news:function(o){return e({url:r.url+"/mobile/Home/newsList",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_news_by_id:function(o){return e({url:r.url+"/mobile/Home/newsDetail",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})}}}]),angular.module("Transport").factory("tokenInterceptor",["$location","$q","localStorageService","errorServices","config",function(e,r,o,t,n){return{request:function(e){return e},requestError:function(){},response:function(t){var a=r.defer();return t.config.url.indexOf(".html")>0?t:t.data.respcode==n.request.TOKEN_INVALID?(console.log("TOKEN_INVALID"),o.remove("token"),e.path("/signIn").replace(),a.promise):t},responseError:function(e){var o=r.defer();return t.requestError(e.data,e.status,e.headers,e.config),o.promise}}}]),angular.module("Transport").factory("toastServices",function(){return{show:function(){},hide:function(){}}}),angular.module("Transport").factory("errorServices",["$rootScope","$timeout","toastServices",function(e,r,o){return{show:function(){},hide:function(){},autoHide:function(){},requestError:function(e,r,t,n){switch(o.hide(),r){case 0:this.autoHide("连接超时");break;case 500:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 509:case 510:this.autoHide("服务器连接出错")}console.log("onRequestError output status, data, headers, config"),console.log(r),console.log(e),console.log(t),console.log(n),console.log("onRequestError end")}}}]),angular.module("Transport").factory("appServices",["$rootScope","$window","$location","errorServices","toastServices","config",function(e,r,o,t,n,a){var c=function(){},s=function(e,r,o){n.hide(),t.hide(),l(e,r,o)},i=function(){},l=function(){};return{init:function(){e.$on("$routeChangeStart",c),e.$on("$routeChangeSuccess",s),e.$on("$routeChangeError",i),e.go=function(e){o.path(e)},e.back=function(){r.history.back()},e.staticImageUrl=a.imageUrl}}}]),angular.module("Transport").directive("showOnLoaded",function(){return{link:function(e,r){$(r).css({visibility:"hidden"}),r.bind("load",function(){console.log("loaded");var o=parseFloat(e.$eval($(r).parent().attr("data-rate")));if(!o)return console.log("unexpect rate"),void 0;var t=$(r).width()/$(r).height();o>t?$(r).css({height:"100%",width:"auto"}):$(r).css({height:"auto",width:"100%"}),$(r).parent().css({background:"none"}),$(r).css({visibility:"visible"})})}}}),angular.module("Transport").directive("onRepeatDone",function(){return{restrict:"A",link:function(e,r){e.$last&&e.$emit("repeat_done",r)}}}),angular.module("Transport").directive("imageview",function(){return{restrict:"E",scope:{src:"="},template:"<img ng-src='{{src}}' show-on-loaded>",link:function(e,r){var o="../images/default.png",t=parseFloat(e.$eval($(r).attr("data-rate")));if(!t)return console.log("unexpect rate"),void 0;var n={display:"block",width:$(r).width()||$(r).parent().width(),overflow:"hidden","text-align":"center","background-image":"url("+o+")","background-size":"100%","background-position":"center center","line-height":($(r).width()||$(r).parent().width())/t+"px",height:($(r).width()||$(r).parent().width())/t};$(r).css(n),$(r).parent().css({overflow:"hidden"})}}}),angular.module("Transport").directive("dribehanceHeader",["$rootScope",function(e){return{restrict:"E",templateUrl:"templates/header.html",scope:{title:"="},link:function(r){r.back=function(){e.back()}}}}]),angular.module("Transport").directive("banner",function(){return{restrict:"E",transclude:!0,template:"<div class='carousel-holder owl-carousel theme' ng-transclude></div>",link:function(e,r){var o={autoPlay:5e3,items:1};o=angular.extend({},o,e.$eval($(r).attr("data-options")));var t=parseFloat(e.$eval($(r).attr("data-rate"))),n={display:"block",width:$(r).parent().width()||$(window).width(),height:($(r).parent().width()||$(window).width())/t};$(r).css(n),e.$on("repeat_done",function(){$(r).find(".carousel-holder").owlCarousel(o)})}}}),angular.module("Transport").constant("config",{url:"http://203.88.161.147",imageUrl:"http://www.bibicargo.com/files/image?name=",request:{SUCCESS:"200",TOKEN_INVALID:"405"},response:{SUCCESS:1},common_params:{invoke:"h5"},interceptor:["about","account","address","askforpay_records","calculator","cargo","cargos","cargos_merge","charge_records","contact","cost","create_address","forget","index","info","infos","me_info","order","orders","privacy","question","services","signin","signup","teaching"]});
//# sourceMappingURL=app.min.js.map
