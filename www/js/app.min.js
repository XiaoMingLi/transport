angular.module("Transport",["ngRoute","ngSanitize","LocalStorageModule"]).config(["$routeProvider","$httpProvider","$locationProvider","localStorageServiceProvider","config",function(e,r,o,t,n){angular.forEach(n.interceptor,function(r){var o=r.replace(/_[a-z]/g,function(e){return e.split("_")[1].toUpperCase()});o+="Controller",e.when("/"+r,{templateUrl:"templates/"+r+".html",reloadOnSearch:!1,controller:o,resolve:{user:["$q","$location","localStorageService",function(e,o,t){var n=["account","me_info","address","create_address","cargo","cargos","cargos_merge","orders","services","charge_records","askforpay_records"],a=e.defer();return n.includes(r)&&!t.get("token")?(a.reject(),o.path("/signin").replace(),void 0):(a.resolve(),a.promise)}]}})}),e.otherwise("/index"),r.defaults.useXDomain=!0,r.defaults.withCredentials=!0,delete r.defaults.headers.common["X-Requested-With"],t.setStorageCookie(.02),r.interceptors.push("tokenInterceptor")}]).run(["appServices",function(e){e.init()}]),angular.module("Transport").factory("userServices",["$http","localStorageService","config",function(e,r,o){return{signin:function(r){return e({url:o.url+"/mobile/UserCenter/Login",method:"GET",params:angular.extend({},o.common_params,r)}).then(function(e){return e.data})},signup:function(r){return e({url:o.url+"/mobile/UserCenter/doReg",method:"GET",params:angular.extend({},o.common_params,r)}).then(function(e){return e.data})},forget:function(r){return e({url:o.url+"/mobile/UserCenter/forgetPwdPost",method:"GET",params:angular.extend({},o.common_params,r)}).then(function(e){return e.data})},get_smscode_1:function(r){return e({url:o.url+"/mobile/UserCenter/sendCode",method:"GET",params:angular.extend({},o.common_params,r)}).then(function(e){return e.data})},get_smscode_2:function(r){return e({url:o.url+"/mobile/UserCenter/sendForgetCode",method:"GET",params:angular.extend({},o.common_params,r)}).then(function(e){return e.data})},query_userinfo:function(t){return e({url:o.url+"/mobile/UserCenter/userInfo",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})},query_address:function(t){return e({url:o.url+"/mobile/UserCenter/addressList",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})},remove_address:function(t){return e({url:o.url+"/mobile/UserCenter/deleteAddress",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})},modify_userinfo:function(t){return e({url:o.url+"/mobile/UserCenter/updatePswOrEmail",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})},charge:function(t){return e({url:o.url+"/mobile/ServerManage/addCharge",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})},query_charge_records:function(t){return e({url:o.url+"/mobile/ServerManage/chargeList",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})},askforpay:function(t){return e({url:o.url+"/mobile/ServerManage/addPay",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})},query_askforpay_records:function(t){return e({url:o.url+"/mobile/ServerManage/payList",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})},create_cargo:function(t){return e({url:o.url+"/mobile/CargoManage/addItemRegiste",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})},query_cargos:function(t){return e({url:o.url+"/mobile/CargoManage/itemRegisterList",method:"GET",params:angular.extend({},o.common_params,{token:r.get("token")},t)}).then(function(e){return e.data})}}}]),angular.module("Transport").factory("transportServices",["$http","config",function(e,r){return{query_contact:function(o){return e({url:r.url+"/mobile/Home/contactInfo",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_banner:function(o){return e({url:r.url+"/mobile/Home/bannerList",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_tutorial:function(o){return e({url:r.url+"/mobile/Home/teach",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_fee:function(o){return e({url:r.url+"/mobile/Home/money",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_calculator_constant:function(){return e({url:r.url+"/mobile/Home/fee",method:"GET",params:angular.extend({},r.common_params,input)}).then(function(e){return e.data})},query_news:function(o){return e({url:r.url+"/mobile/Home/newsList",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})},query_news_by_id:function(o){return e({url:r.url+"/mobile/Home/newsDetail",method:"GET",params:angular.extend({},r.common_params,o)}).then(function(e){return e.data})}}}]),angular.module("Transport").factory("tokenInterceptor",["$location","$q","localStorageService","errorServices","config",function(e,r,o,t,n){return{request:function(e){return e},requestError:function(){},response:function(t){var a=r.defer();return t.config.url.indexOf(".html")>0?t:t.data.respcode==n.request.TOKEN_INVALID?(console.log("TOKEN_INVALID"),o.remove("token"),e.path("/signIn").replace(),a.promise):t},responseError:function(e){var o=r.defer();return t.requestError(e.data,e.status,e.headers,e.config),o.promise}}}]),angular.module("Transport").factory("toastServices",function(){return{show:function(){$(".toast").show()},hide:function(){$(".toast").hide()}}}),angular.module("Transport").factory("errorServices",["$rootScope","$timeout","toastServices",function(e,r,o){return{show:function(r){console.log(r),e.error_message=r,$(".error-msg").show()},hide:function(){e.error_message="",$(".error-msg").hide()},autoHide:function(o){e.error_message=o,$(".error-msg").show(),r(function(){e.error_message="",$(".error-msg").hide()},3e3)},requestError:function(e,r,t,n){switch(o.hide(),r){case 0:this.autoHide("连接超时");break;case 500:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 509:case 510:this.autoHide("服务器连接出错")}console.log("onRequestError output status, data, headers, config"),console.log(r),console.log(e),console.log(t),console.log(n),console.log("onRequestError end")}}}]),angular.module("Transport").factory("appServices",["$rootScope","$window","$location","errorServices","toastServices","config",function(e,r,o,t,n,a){var s=function(){},c=function(e,r,o){n.hide(),t.hide(),u(e,r,o)},i=function(){},u=function(){};return{init:function(){e.$on("$routeChangeStart",s),e.$on("$routeChangeSuccess",c),e.$on("$routeChangeError",i),e.go=function(e){o.path(e)},e.back=function(){r.history.back()},e.staticImageUrl=a.imageUrl}}}]),angular.module("Transport").directive("showOnLoaded",function(){return{link:function(e,r){$(r).css({visibility:"hidden"}),r.bind("load",function(){console.log("loaded");var o=parseFloat(e.$eval($(r).parent().attr("data-rate")));if(!o)return console.log("unexpect rate"),void 0;var t=$(r).width()/$(r).height();o>t?$(r).css({height:"100%",width:"auto"}):$(r).css({height:"auto",width:"100%"}),$(r).parent().css({background:"none"}),$(r).css({visibility:"visible"})})}}}),angular.module("Transport").directive("onRepeatDone",function(){return{restrict:"A",link:function(e,r){e.$last&&e.$emit("repeat_done",r)}}}),angular.module("Transport").directive("imageview",function(){return{restrict:"E",scope:{src:"="},template:"<img ng-src='{{src}}' show-on-loaded>",link:function(e,r){var o="../images/default.png",t=parseFloat(e.$eval($(r).attr("data-rate")));if(!t)return console.log("unexpect rate"),void 0;var n={display:"block",width:$(r).width()||$(r).parent().width(),overflow:"hidden","text-align":"center","background-image":"url("+o+")","background-size":"100%","background-position":"center center","line-height":($(r).width()||$(r).parent().width())/t+"px",height:($(r).width()||$(r).parent().width())/t};$(r).css(n),$(r).parent().css({overflow:"hidden"})}}}),angular.module("Transport").directive("dribehanceHeader",["$rootScope",function(e){return{restrict:"E",templateUrl:"templates/header.html",scope:{title:"="},link:function(r){r.back=function(){e.back()}}}}]),angular.module("Transport").directive("countdown",["$interval",function(e){return{restrict:"E",scope:{countdown:"=",disabled:"=countdownDisabled"},link:function(r,o){function t(){var o=r.countdown.message,t=parseFloat(r.countdown.count)?parseFloat(r.countdown.count):60;n=!0,r.$apply(function(){r.countdown.message=t--,r.countdown.mode="disabled",r.countdown.reset=!1,r.countdown.callback()});var a=e(function(){r.countdown.message=t--,(0>t||r.countdown.reset)&&(e.cancel(a),r.countdown.message=o,n=!1)},1e3)}var n=!1;$(o).bind("click",function(){r.disabled||n||t()})}}}]),angular.module("Transport").directive("banner",function(){return{restrict:"E",transclude:!0,template:"<div class='carousel-holder owl-carousel theme' ng-transclude></div>",link:function(e,r){var o={autoPlay:5e3,items:1};o=angular.extend({},o,e.$eval($(r).attr("data-options")));var t=parseFloat(e.$eval($(r).attr("data-rate"))),n={display:"block",width:$(r).parent().width()||$(window).width(),height:($(r).parent().width()||$(window).width())/t};$(r).css(n),e.$on("repeat_done",function(){$(r).find(".carousel-holder").owlCarousel(o)})}}}),angular.module("Transport").controller("teachingController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){t.show(),r.query_tutorial({}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?e.tutorial=r.teach:o.autoHide(r.message)})}]),angular.module("Transport").controller("signupController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){e.input={username:"",telephone:"",smscode:"",password:"",password_1:"",email:""},e.countdown={message:"獲取驗證碼"},e.countdown.callback=function(){t.show(),r.get_smscode_1({telephone:e.input.telephone}).then(function(e){t.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?o.autoHide(e.message):o.autoHide(e.message)})},e.ajaxForm=function(){return e.input.password!=e.input.password_1?(o.autoHide("兩次輸入的密碼不一致"),void 0):(t.show(),r.signup({telephone:e.input.telephone,tel_code:e.input.smscode,email:e.input.email,password:e.input.password,nickname:e.input.username}).then(function(e){t.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?o.autoHide(e.message):o.autoHide(e.message)}),void 0)}}]),angular.module("Transport").controller("signinController",["$scope","$rootScope","userServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a,s){e.input={telephone:"",password:""},e.ajaxForm=function(){n.show(),o.signin({telephone:e.input.telephone,password:e.input.password}).then(function(e){n.hide(),e.code==s.request.SUCCESS&&e.status==s.response.SUCCESS?(a.set("token",e.token),r.back()):t.autoHide(e.message)})},e.is_signin=function(){return a.get("token")?!0:!1},e.logout=function(){a.remove("token")}}]),angular.module("Transport").controller("servicesController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){e.services={state:"charge"},e.change=function(r){e.services.state=r},e.charge={company:"Highway Technology Limited",type:"1",alipay:"",alipay_owner:"",rmb:"",hkd:""},e.$watch("charge.rmb",function(r,t){return r!=t&&""!=r&&void 0!=r?parseFloat(r)?(e.charge.hkd=1.2*r,void 0):(o.autoHide("請輸入數字"),void 0):void 0}),e.ajaxForm=function(){t.show(),r.charge({bank_type:"1",acount:e.charge.alipay,acount_name:e.charge.alipay_owner,need_from_money:e.charge.rmb,need_to_money:e.charge.hkd}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?(o.autoHide(r.message),e.charge={company:"Highway Technology Limited",type:"1",alipay:"",alipay_owner:"",rmb:"",hkd:""}):o.autoHide(r.message)})},e.askforpay={company:"Highway Technology Limited",type:"1",alipay:"",transcation_id:"",rmb:"",hkd:"0.00",fee:"0.00",total_hkd:"0.00"},e.$watch("askforpay.rmb",function(r,t){if(r!=t&&""!=r&&void 0!=r){if(!parseFloat(r))return o.autoHide("請輸入數字"),void 0;r=parseFloat(r),e.askforpay.hkd=new Number(1.2*r).toFixed(2),e.askforpay.fee=new Number(.03*e.askforpay.hkd).toFixed(2),e.askforpay.total_hkd=new Number(1.03*e.askforpay.hkd).toFixed(2)}}),e.ajaxForm_1=function(){t.show(),r.askforpay({pay_bank_type:"1",pay_name:e.askforpay.alipay,pay_num:e.askforpay.transcation_id,pay_money_RMB:e.askforpay.rmb,money_HKD:e.askforpay.hkd,total_money_HKD:e.askforpay.total_hkd}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?(o.autoHide(r.message),e.askforpay={company:"Highway Technology Limited",type:"1",alipay:"",transcation_id:"",rmb:"",hkd:"0.00",fee:"0.00",total_hkd:"0.00"}):o.autoHide(r.message)})}}]),angular.module("Transport").controller("questionController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("privacyController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("ordersController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.preview_id="",e.preview=function(r){e.preview_id=r},e.hide=function(){e.preview_id=""}}]),angular.module("Transport").controller("orderController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("meInfoController",["$scope","$rootScope","$timeout","userServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a,s,c){a.show(),t.query_userinfo().then(function(r){a.hide(),r.code==c.request.SUCCESS&&r.status==c.response.SUCCESS?(e.user=r.Result.UserInfo,e.user.new_email=e.user.email):n.autoHide(r.message)}),e.ajaxForm=function(){return e.user.password_1!=e.user.password_2?(n.autoHide("兩次輸入的密碼不一致"),void 0):(a.show(),t.modify_userinfo({nickname:e.user.nickname,password:e.user.password_1,email:e.user.new_email}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?(n.autoHide(e.message),o(function(){r.back()},1e3)):n.autoHide(e.message)}),void 0)}}]),angular.module("Transport").controller("infosController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){e.news=[],e.page={pn:1,page_size:15,message:"点击加载更多"},e.loadMore=function(){e.no_more||(t.show(),e.page.message="正在加载...",r.query_news(e.page).then(function(r){t.hide(),e.page.message="点击加载更多",r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?(e.news=e.news.concat(r.Result.NewsList.list),e.no_more=e.news.length==r.Result.NewsList.totalRow?!0:!1):o.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.format_time=function(e){return e.split(" ")[0]},e.loadMore()}]),angular.module("Transport").controller("infoController",["$scope","$routeParams","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a,s){n.show(),o.query_news_by_id({id:r.id}).then(function(r){n.hide(),r.code==s.request.SUCCESS&&r.status==s.response.SUCCESS?e.info=r.Result.NewsDetail:t.autoHide(r.message)})}]),angular.module("Transport").controller("indexController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){t.show(),r.query_banner({}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?e.banners=r.IndexBanners:o.autoHide(r.message)})}]),angular.module("Transport").controller("forgetController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){e.input={telephone:"",smscode:""},e.countdown={message:"獲取驗證碼"},e.countdown.callback=function(){t.show(),r.get_smscode_2({telephone:e.input.telephone}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?o.autoHide(r.message):(e.countdown.reset=!0,o.autoHide(r.message))})},e.ajaxForm=function(){t.show(),r.forget({telephone:e.input.telephone,tel_code:e.input.smscode}).then(function(e){t.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?o.autoHide(e.message):o.autoHide(e.message)})}}]),angular.module("Transport").controller("createAddressController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.input={username:"",telephone:"",provinces:["香港"],citys:["全彎區"],districts:["金融街"],province:"香港",city:"全彎區",district:"金融街",address:""}}]),angular.module("Transport").controller("costController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){t.show(),r.query_fee({}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?e.fee=r.money:o.autoHide(r.message)})}]),angular.module("Transport").controller("contactController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){t.show(),r.query_contact({}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?e.contact=r.contactInfo:o.autoHide(r.message)})}]),angular.module("Transport").controller("chargeRecordsController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){e.records=[],e.page={pn:1,page_size:10,message:"点击加载更多"},e.loadMore=function(){e.no_more||(t.show(),e.page.message="正在加载...",r.query_charge_records(e.page).then(function(r){t.hide(),e.page.message="点击加载更多",r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?(e.records=e.records.concat(r.Result.ChargeList.list),e.no_more=e.records.length==r.Result.ChargeList.totalRow?!0:!1):o.autoHide("服务器错误"),e.no_more&&(e.page.message="加載完成，共"+e.records.length+"條記錄"),e.page.pn++}))},e.loadMore()}]),angular.module("Transport").controller("cargosMergeController",["$scope","$location","errorServices","toastServices","localStorageService","config",function(e){e.transport={way:"self",address_type:"business",preview:"hide"}}]),angular.module("Transport").controller("cargosController",["$scope","userServices","$location","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a,s){e.merge=function(){o.path("/cargos_merge")},e.cargos=[],e.page={pn:1,page_size:10,message:"点击加载更多"},e.loadMore=function(){e.no_more||(n.show(),e.page.message="正在加载...",r.query_cargos(e.page).then(function(r){n.hide(),e.page.message="点击加载更多",r.code==s.request.SUCCESS&&r.status==s.response.SUCCESS?(e.cargos=e.cargos.concat(r.Result.ItemRegisters.list),e.no_more=e.cargos.length==r.Result.ItemRegisters.totalRow?!0:!1):t.autoHide("服务器错误"),e.no_more&&(e.page.message="加載完成，共"+e.cargos.length+"件貨物"),e.page.pn++}))},e.loadMore(),e.get_status=function(e){return["未收貨","已入倉","集運中","貨物配送完成"][e]},e.check=function(e){e.checked=!e.checked},e.check_reverse=function(){angular.forEach(e.cargos,function(e){e.checked=!e.checked})}}]),angular.module("Transport").controller("cargoController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){e.input={number:"",company:"申通快遞",companys:["申通快遞","中通快遞","順豐快遞"],tag:"",remarks:""},e.ajaxForm=function(){t.show(),r.create_cargo({express_number:e.input.number,express_company:e.input.company,item_content:e.input.tag,remarks:e.remarks}).then(function(r){t.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?(o.autoHide(r.message),e.input.number="",e.input.tag="",e.input.remarks=""):o.autoHide(r.message)})}}]),angular.module("Transport").controller("calculatorController",["$scope","transportServices","errorServices","toastServices","localStorageService","config",function(e){e.transport={way:"self"}}]),angular.module("Transport").controller("askforpayRecordsController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){e.records=[],e.page={pn:1,page_size:10,message:"点击加载更多"},e.loadMore=function(){e.no_more||(t.show(),e.page.message="正在加载...",r.query_askforpay_records(e.page).then(function(r){t.hide(),e.page.message="点击加载更多",r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?(e.records=e.records.concat(r.Result.PayList.list),e.no_more=e.records.length==r.Result.PayList.totalRow?!0:!1):o.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，合计"+e.records.length+"条记录"),e.page.pn++}))},e.loadMore()}]),angular.module("Transport").controller("addressController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,r,o,t,n,a){e.addresses=[],e.page={pn:1,page_size:10,message:"点击加载更多"},e.loadMore=function(){e.no_more||(t.show(),e.page.message="正在加载...",r.query_address(e.page).then(function(r){t.hide(),e.page.message="点击加载更多",r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?(e.addresses=e.addresses.concat(r.Result.AddressList.list),e.no_more=e.addresses.length==r.Result.AddressList.totalRow?!0:!1):o.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.open=function(){$.magnificPopup.open({items:{src:"#popup"},type:"inline"},0)},e.cancel=function(){$.magnificPopup.close()},e.confirm=function(r){e.remove(r),$.magnificPopup.close()},e.remove=function(e){t.show(),r.remove_address({id:e}).then(function(e){t.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?o.autoHide(e.message):o.autoHide(e.message)})}}]),angular.module("Transport").controller("accountController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").controller("aboutController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Transport").constant("config",{url:"http://203.88.161.147",imageUrl:"http://www.bibicargo.com/files/image?name=",request:{SUCCESS:"200",TOKEN_INVALID:"405"},response:{SUCCESS:1},common_params:{invoke:"h5"},interceptor:["about","account","address","askforpay_records","calculator","cargo","cargos","cargos_merge","charge_records","contact","cost","create_address","forget","index","info","infos","me_info","order","orders","privacy","question","services","signin","signup","teaching"]});
//# sourceMappingURL=app.min.js.map
